syntax = "proto3";

package core_quiz_generation;

// Request message for generating quiz questions by bank ID
message GenerateQuizByBankRequest {
    int64 bank_id = 1;
    string user_id = 2;
}

// Content entry being processed
message ContentEntry {
    string id = 1;
    string name = 2;
    int32 word_count_analyzed = 3;
}

// Quiz generation completed
message CoreQuizGenerationCompleted {
    string quiz_id = 1;
}

// Unified progress message for quiz generation
message CoreQuizGenerationProgress {
    string bank_id = 1;
    int32 total_content_entries = 2;
    optional int32 total_content_entries_skipped = 3;
    int32 current_content_entry_index = 4;
    int32 questions_generated_so_far = 5;
    ContentEntry content_entry = 6;
    int32 total_chunks = 7;
    int32 current_chunk_index = 8;
}

// Status message indicating which content entry is being processed
message CoreQuizGenerationStatus {
    oneof message_type {
        CoreQuizGenerationProgress progress = 1;
        CoreQuizGenerationCompleted completed = 2;
    }
}

// Quiz Generation Service
service CoreQuizGenerationService {
    rpc GenerateQuizByBank(GenerateQuizByBankRequest) returns (stream CoreQuizGenerationStatus);
}