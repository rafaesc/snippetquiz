syntax = "proto3";

package core_quiz_generation;

// Request message for generating quiz questions by bank ID
message GenerateQuizByBankRequest {
    int64 bank_id = 1;
    string user_id = 2;
}

// Content entry being processed
message ContentEntry {
    string id = 1;
    string name = 2;
    int32 word_count_analyzed = 3;
}

// Summary of quiz generation progress
message Summary {
    int32 questions_generated_so_far = 1;
    int32 total_questions_expected = 2;
    int32 failed_entries_count = 3;
}

// Unified progress message for quiz generation
message QuizGenerationProgress {
    string event = 1; // "quiz_generation_progress" or "quiz_generation_completed"
    string bank_id = 2;
    int32 total_content_entries = 3;
    int32 current_content_entry_index = 4;
    ContentEntry content_entry = 5;
    Summary summary = 6;
}

// Quiz Generation Service
service CoreQuizGenerationService {
    rpc GenerateQuizByBank(GenerateQuizByBankRequest) returns (stream QuizGenerationProgress);
}