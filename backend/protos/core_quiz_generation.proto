syntax = "proto3";

package core_quiz_generation;

// Request message for generating quiz questions by bank ID
message GenerateQuizByBankRequest {
    int64 bank_id = 1;
}

// Question option definition
message QuestionOption {
    string option_text = 1;
    string option_explanation = 2;
    bool is_correct = 3;
}

// Question definition
message Question {
    string question = 1;
    string type = 2;
    repeated QuestionOption options = 3;
}

// Progress message for each content entry
message QuizGenerationProgress {
    oneof message_type {
        GenerationStatus status = 1;
        GenerationResult result = 2;
    }
}

// Status message indicating which content entry is being processed
message GenerationStatus {
    int64 content_entry_id = 1;
    string page_title = 2;
    string status = 3; // e.g., "Generating questions for page title X"
}

// Result message containing generated questions for a content entry
message GenerationResult {
    int64 content_entry_id = 1;
    string page_title = 2;
    repeated Question questions = 3;
}

// Quiz Generation Service
service CoreQuizGenerationService {
    rpc GenerateQuizByBank(GenerateQuizByBankRequest) returns (stream QuizGenerationProgress);
}